<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Alwin & Serfin Wedding Invitation</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #0b0b0c;
      color: #f5f5f5;
      overflow-x: hidden;
    }

    /* Intro Door Screen */
    #intro-door {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #000;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      z-index: 9999;
      transition: opacity 1s ease;
    }
    #door-panel {
      width: 70%;
      max-width: 500px;
      height: 300px;
      background: linear-gradient(145deg, #1a1a1a, #000000);
      border: 3px solid gold;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: transform 1.5s ease, opacity 1s ease;
    }
    #door-panel.open {
      transform: scale(2) translateY(-200%);
      opacity: 0;
    }
    #intro-text {
      font-size: 1.4rem;
      margin-top: 20px;
      color: gold;
    }

    /* Navigation */
    nav {
      width: 100%;
      background: rgba(0,0,0,0.55);
      padding: 1rem;
      text-align: center;
      position: sticky;
      top: 0;
      z-index: 50;
      backdrop-filter: blur(5px);
    }
    nav a {
      margin: 0 1rem;
      color: gold;
      text-decoration: none;
      font-weight: bold;
      font-size: 1.1rem;
    }

    /* Sections */
    section {
      padding: 2.5rem 1.5rem;
      max-width: 900px;
      margin: auto;
      background: rgba(255,255,255,0.05);
      border-radius: 12px;
      margin-top: 2rem;
    }

    h2 {
      color: gold;
      text-align: center;
    }

    /* Gallery */
    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-top: 1.5rem;
    }
    .gallery-grid img {
      width: 100%;
      border-radius: 10px;
      border: 2px solid gold;
    }

    /* Wishes */
    #wishes-box {
      min-height: 150px;
      text-align: center;
      font-size: 1.2rem;
      padding: 1rem;
      border-radius: 10px;
      background: rgba(255,255,255,0.08);
      border: 1px solid gold;
    }
    .fade {
      animation: fadeCycle 2s ease-in-out;
    }
    @keyframes fadeCycle {
      0% { opacity: 0; }
      50% { opacity: 1; }
      100% { opacity: 0; }
    }

    /* RSVP */
    #thankyou-message {
      display: none;
      text-align: center;
      color: gold;
      font-size: 1.3rem;
      margin-top: 1rem;
    }
    .rsvp-box input, select, textarea {
      width: 100%;
      padding: 0.8rem;
      margin-top: 0.7rem;
      background: rgba(255,255,255,0.15);
      border: 1px solid gold;
      border-radius: 8px;
      color: white;
      font-size: 1rem;
    }
    .rsvp-btn {
      margin-top: 1rem;
      padding: 1rem;
      width: 100%;
      background: gold;
      color: black;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    audio { display: none; }
  </style>
</head>
<body>

  <!-- Door Intro Screen -->
  <div id="intro-door">
    <div id="door-panel">
      <span style="color:gold; font-size:1.5rem;">You Are Invited</span>
    </div>
    <div id="intro-text">Tap to Enter</div>
  </div>

  <!-- Background Music -->
  <audio id="bg-music" loop>
    <source src="https://www.bensound.com/bensound-music/bensound-romantic.mp3" type="audio/mpeg" />
  </audio>

  <!-- Door Sound -->
  <audio id="door-sound">
    <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_6ac1e7e736.mp3?filename=door-open-110401.mp3" type="audio/mpeg" />
  </audio>

  <!-- Navigation -->
  <nav>
    <a href="#invitation">Invitation</a>
    <a href="#gallery">Gallery</a>
    <a href="#wishes">Wishes</a>
    <a href="#rsvp">RSVP</a>
  </nav>

  <!-- Invitation -->
  <section id="invitation">
    <h2>Wedding Invitation</h2>
    <p style="text-align:center; font-size:1.2rem;">Alwin Riady Argono & Serfin Marcella</p>
    <p style="text-align:center;">Saturday, May 30, 2026 — 6:00 PM</p>
    <p style="text-align:center;">Royal Avilla, Lombok</p>
    <p style="text-align:center; color:gold; margin-top:1rem;">Dress Code: No Batik, Suits Only</p>
  </section>

  <!-- Gallery -->
  <section id="gallery">
    <h2>Gallery</h2>
    <div class="gallery-grid">
      <img src="https://wallpapers.com/images/hd/demon-slayer-infinity-castle-4k-y76o8swqup16oupt.jpg" />
      <img src="https://images6.alphacoders.com/133/1339593.png" />
      <img src="https://images.alphacoders.com/133/1339591.png" />
    </div>
  </section>

  <!-- Wishes -->
  <section id="wishes">
    <h2>Messages & Wishes</h2>
    <div id="wishes-box">Loading...</div>
  </section>

  <!-- RSVP -->
  <section id="rsvp">
    <h2>RSVP</h2>
    <div class="rsvp-box">
      <input id="name" placeholder="Full Name" />
      <input id="phone" placeholder="Phone Number" />
      <select id="attend">
        <option value="Yes">Yes, I will attend</option>
        <option value="No">Sorry, I cannot attend</option>
      </select>
      <select id="people">
        <option value="1">1 Person</option>
        <option value="2">2 People</option>
      </select>
      <textarea id="wishes-input" placeholder="Your wishes for the couple"></textarea>
      <button class="rsvp-btn" onclick="submitRSVP()">Send RSVP</button>
    </div>
    <div id="thankyou-message"></div>
  </section>

  <script>
    /* ------------------------------
       DOOR TAP TO ENTER
    ------------------------------ */
    const door = document.getElementById("door-panel");
    const intro = document.getElementById("intro-door");
    const bgMusic = document.getElementById("bg-music");
    const doorSound = document.getElementById("door-sound");

    // Works on mobile + desktop
    intro.addEventListener("click", () => {
      if (!door.classList.contains("open")) {
        doorSound.play();
        door.classList.add("open");

        setTimeout(() => {
          intro.style.opacity = 0;
          setTimeout(() => intro.style.display = "none", 900);
          bgMusic.play();
        }, 800);
      }
    });

    /* ------------------------------
       LOAD WISHES FROM SHEETDB
    ------------------------------ */
    const wishesBox = document.getElementById("wishes-box");
    let wishes = [];
    let currentIndex = 0;

    fetch("https://sheetdb.io/api/v1/4e3p3gyhynzah")
      .then(res => res.json())
      .then(data => {
        wishes = data
          .filter(row => row.Name || row.Wishes)
          .map(row => `<b>${row.Name || "Anonymous"}</b>: ${row.Wishes || ""}`);

        if (wishes.length === 0) {
          wishesBox.innerHTML = "No wishes yet.";
          return;
        }

        // Start rotating
        showWish();
        setInterval(showWish, 4000);
      });

    function showWish() {
      wishesBox.classList.remove("fade");

      setTimeout(() => {
        wishesBox.innerHTML = wishes[currentIndex];
        wishesBox.classList.add("fade");
        currentIndex = (currentIndex + 1) % wishes.length;
      }, 100);
    }

    /* ------------------------------
       SUBMIT RSVP
    ------------------------------ */
    function submitRSVP() {
      const name = document.getElementById("name").value.trim();
      const phone = document.getElementById("phone").value.trim();
      const attend = document.getElementById("attend").value;
      const people = document.getElementById("people").value;
      const wishesInput = document.getElementById("wishes-input").value.trim();

      if (!name) {
        alert("Please enter your name.");
        return;
      }

      fetch("https://sheetdb.io/api/v1/4e3p3gyhynzah", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          data: [{
            Name: name,
            Phone: phone,
            Attendance: attend,
            People: people,
            Wishes: wishesInput
          }]
        })
      })
      .then(r => r.json())
      .then(() => {
        document.querySelector(".rsvp-box").style.display = "none";
        const msg = document.getElementById("thankyou-message");
        msg.innerHTML = `Thank you for confirming, <b>${name}</b> ♥`;
        msg.style.display = "block";
      })
      .catch(() => alert("Something went wrong. Please try again."));
    }
  </script>

</body>
</html>